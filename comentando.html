<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Guía para la creación de la app - Rails Girl Córdoba 2015</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='http://fonts.googleapis.com/css?family=Montserrat:700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Arvo:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/vendor.css">
    <link rel="stylesheet" href="css/main.css">

    <link rel="shortcut icon" href="favicon.ico">
</head>
<body>
<!--[if lt IE 7]>
<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
<![endif]-->

<div id="wrapper">

    <!-- Sidebar -->

    <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <li class="sidebar-brand">
                <a href="http://railsgirls.com/cordoba">
                    <img src="images/railsgirls-logo.png">
                </a>
            </li>
            <li>
                <a href="index.html">1. Creando la aplicación web</a>
            </li>
            <li>
                <a href="estructura.html">2. Revisando la estructura del proyecto </a>
            </li>
            <li>
                <a href="fotos.html">3. Creando las fotos de la aplicación</a>
            </li>
            <li>
                <a href="subida.html">4. Habilitando la subida de fotos</a>
            </li>
            <li>
                <a href="web-bonita.html">5. Haciendo una aplicación web bonita</a>
            </li>
            <li>
                <a href="comentando.html">6. Comentando fotos</a>
            </li>
        </ul>
    </div>

    <!-- Page Content -->
    <div id="page-content-wrapper">
        <div class="container-fluid">
            <a href="#menu-toggle" class="btn btn-default" id="menu-toggle"> &#9776;</a>
            <div class="row">
                <div class="col-lg-12">
                    <h1>6. Comentando fotos</h1>

                    <p class="grey">A continuación vas a agregar una funcionalidad extra a tu aplicación web, y es la de incluir comentarios a las fotos que se van subiendo. En este caso, los comentarios serán un nuevo modelo de la base de datos de tu aplicación, e irán ligados a las fotos que se vayan añadiendo.</p>

                    <ul>
                        <li>Crea el modelo comment a través de la utilidad scaffold de rails:
                            <p><code>rails g scaffold comment text:string photo_id:integer</code></p>
                        </li>
                        <li>Crea las tablas de la base de datos para comment con el comando rake:
                            <p><code>rake db:migrate</code></p>
                        </li>
                        <li>Abre el fichero app/models/photo.rb e incluye la siguiente linea:
                            <p><code>has_many :comments</code></p>
                            <ul>
                                <li>
                                    Con esta línea le estás indicando a rails que una foto tiene varios comentarios. Esta manera de relacionar modelos de tu base de datos permite que tengas acceso a ellos fácilmente. 
                                </li>
                            </ul>
                        </li>
                        <li>Abre el fichero app/models/comment.rb e incluye la siguiente linea:
                            <p><code>belongs_to :photo</code></p>
                            <ul>
                                <li>
                                    Con esta línea le estás indicando a rails que un comentario pertenece a una foto.
                                </li>
                            </ul>
                        </li>
                        <li>Abre el fichero app/controllers/photos_controller.rb y busca la siguiente línea de código...
                            <p><code>def index</code></p>
                            … Y añade justo debajo la siguiente línea de código:
                            <p><code>@comment = Comment.new</code></p>
                            <ul>
                                <li>
                                    Con esta nueva línea estás preparando un contenedor para un nuevo comentario. Es necesario incluir esta linea para poder realizar el formulario de creación de comentarios desde la vista de foto.
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- /#page-content-wrapper -->

</div>

<script src="js/vendor.js"></script>
<script src="js/main.js"></script>
</body>

</html>